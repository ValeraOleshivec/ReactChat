import React from "react";
import classes from "./MessagesList.module.css";
import Message from "./Message/Message";
import Input from "../Input/Input";
import useLists from "../../../../Hooks/useLists";

const MessagesList = () => {
    let name = sessionStorage.getItem('user')
    let avatar = sessionStorage.getItem('avatar')
    const {messageList,socket,pushNewMessages} = useLists();
    socket.on("renderMessage",(data)=>{
        pushNewMessages(data)
    })
  return (
    <div className={classes.RightBlock}>
      <div className={classes.Head}>
        <div className={classes.Image}>
            <img src={avatar} alt=''/>
        </div>
        <p className={classes.Head__Name}>{name}</p>
          <div className={classes.Buttons}>
              <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40" fill="none">
                  <path d="M35 27.3667V33.26C35.0002 33.682 34.8403 34.0883 34.5527 34.397C34.265 34.7057 33.8709 34.8938 33.45 34.9233C32.7217 34.9733 32.1267 35 31.6667 35C16.9383 35 5 23.0617 5 8.33333C5 7.87333 5.025 7.27833 5.07667 6.55C5.1062 6.12907 5.2943 5.73502 5.60301 5.44735C5.91171 5.15968 6.31804 4.99981 6.74 5H12.6333C12.8401 4.99979 13.0395 5.07643 13.1929 5.21503C13.3463 5.35364 13.4427 5.5443 13.4633 5.75C13.5017 6.13333 13.5367 6.43833 13.57 6.67C13.9012 8.98154 14.58 11.2297 15.5833 13.3383C15.7417 13.6717 15.6383 14.07 15.3383 14.2833L11.7417 16.8533C13.9408 21.9774 18.0242 26.0609 23.1483 28.26L25.715 24.67C25.8199 24.5233 25.973 24.4181 26.1475 24.3728C26.322 24.3274 26.5069 24.3447 26.67 24.4217C28.7783 25.4232 31.0259 26.1003 33.3367 26.43C33.5683 26.4633 33.8733 26.4983 34.2533 26.5367C34.4587 26.5577 34.649 26.6543 34.7873 26.8076C34.9255 26.961 35.0002 27.1602 35 27.3667Z" fill="#A0A0A0"/>
              </svg>
              <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40" fill="none">
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M8.33331 8.33334C7.00723 8.33334 5.73546 8.86013 4.79778 9.79781C3.8601 10.7355 3.33331 12.0073 3.33331 13.3333V26.6667C3.33331 27.9928 3.8601 29.2645 4.79778 30.2022C5.73546 31.1399 7.00723 31.6667 8.33331 31.6667H25C26.3261 31.6667 27.5978 31.1399 28.5355 30.2022C29.4732 29.2645 30 27.9928 30 26.6667V24.0233L33.8216 27.845C34.0547 28.078 34.3517 28.2367 34.6749 28.301C34.9982 28.3653 35.3332 28.3323 35.6377 28.2061C35.9422 28.08 36.2025 27.8665 36.3856 27.5924C36.5688 27.3184 36.6666 26.9963 36.6666 26.6667V13.3333C36.6666 13.0038 36.5688 12.6816 36.3856 12.4076C36.2025 12.1336 35.9422 11.92 35.6377 11.7939C35.3332 11.6678 34.9982 11.6348 34.6749 11.699C34.3517 11.7633 34.0547 11.922 33.8216 12.155L30 15.9767V13.3333C30 12.0073 29.4732 10.7355 28.5355 9.79781C27.5978 8.86013 26.3261 8.33334 25 8.33334H8.33331Z" fill="#A0A0A0"/>
              </svg>
              <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40" fill="none">
                  <path d="M20 5C18.1667 5 16.6667 6.5 16.6667 8.33333C16.6667 10.1667 18.1667 11.6667 20 11.6667C21.8334 11.6667 23.3334 10.1667 23.3334 8.33333C23.3334 6.5 21.8334 5 20 5ZM20 28.3333C18.1667 28.3333 16.6667 29.8333 16.6667 31.6667C16.6667 33.5 18.1667 35 20 35C21.8334 35 23.3334 33.5 23.3334 31.6667C23.3334 29.8333 21.8334 28.3333 20 28.3333ZM20 16.6667C18.1667 16.6667 16.6667 18.1667 16.6667 20C16.6667 21.8333 18.1667 23.3333 20 23.3333C21.8334 23.3333 23.3334 21.8333 23.3334 20C23.3334 18.1667 21.8334 16.6667 20 16.6667Z" fill="#A0A0A0"/>
              </svg>
          </div>
      </div>
      <div className={classes.Messages}>
          {messageList.map((value)=>
              <Message value={value}/>
          )}
      </div>
      <Input />
    </div>
  );
};

export default MessagesList;
